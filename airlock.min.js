/* | Airlock.js - v0.1.2
   | http://searchdiscovery.com/ */
!function(a,b){!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject&&a[a.GoogleAnalyticsObject]||(a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g))}(a,b,"script","//www.google-analytics.com/analytics.js","ga"),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)c in this&&a.call(b,this[c],c,this)});var c=function(a){return a},d=a._gaq,e=a[a.GoogleAnalyticsObject],f={actions:/^([\w\d_-]+)?\.?(_track(Event|Pageview|Trans|Social|Timing)|_add(Item|Trans)|_set(CustomVar|Account|DomainName|AllowLinker|SampleRate|CookiePath)?|_link|_require)$/,setupActions:/^(.+\.)?_(set(Account|CustomVar|DomainName|AllowLinker|SampleRate|CookiePath)?)$/,ecommerceActions:/^(.+\.)?_(add(Trans|Item)|trackTrans)$/,writeableSet:/^page|title$/},g=function(){this._contents={},this._defaultKey="t0"};g.prototype.get=function(a){return a=a||this._defaultKey,this._contents[a]},g.prototype.set=function(a,b){return a=a||this._defaultKey,this._contents[a]=b,this},g.prototype.has=function(a){return a=a||this._defaultKey,!!this._contents[a]},g.prototype.forEach=function(a,b){for(var c in this._contents)a.call(b,this._contents[c],c,this._contents)};var h=function(a,b){this.settings={},this._settings={},this.namespace=a,this.account=b,this.setupQueue=[],this.initialized=!1,this.settings.name=this.namespace};h.fromTracker=function(a){var b=a.get("name"),c=a.get("trackingId"),d=new h(b,c);return d.initialize()},h.prototype.setAccount=function(a){return this.account=a,this},h.prototype.initialize=function(){return this.setupQueue.forEach(function(a){a()}),this.initialized=!0,this};var i={};i.spaceships=new g,i.readAction=function(a){var b=a.match(f.actions);return{namespace:b[1],action:b[2]}},i.initialize=function(){var b=[],c=a[a.GoogleAnalyticsObject];c.q&&c.q.forEach(function(b){"string"==typeof b[0]&&"create"===b[0]&&c(function(){var c=a[a.GoogleAnalyticsObject],d=b[b.length-1],e="object"==typeof d&&d.name?d.name:"t0",f=c.getByName(e),g=h.fromTracker(f);i.dock(g)})}),c.P&&c.P.forEach(function(a){var b=h.fromTracker(a);this.dock(b)},this),d.forEach(function(a){if("function"==typeof a)return i.pressurize(a),void 0;var c=i.readAction(a[0]);return f.setupActions.test(c.action)?(this.spaceships.has(c.namespace)||this.dock(new h(c.namespace)),this.pressurize(a,this.spaceships.get(c.namespace)),void 0):(b.push(a),void 0)},this),Array.prototype.splice.apply(d,[0,d.length].concat(b)),this.spaceships.forEach(function(a){i.open(a,["create",a.account,a.settings])}),d.push=function(a){if("function"==typeof a)return i.pressurize(a);var b=a[0];if(f.actions.test(b)){f.ecommerceActions.test(b)&&!i.ecommerceInitialized&&(i.ecommerceInitialized=!0,c("require","ecommerce","ecommerce.js"));var d=i.spaceships.get(i.readAction(b).namespace);d&&(a=i.pressurize(a,d),i.open(d,a))}},d.forEach([].push.bind(d))},i.dock=function(a){this.spaceships.set(a.namespace,a)},i.open=function(b,c){if(b.account){var d="create"===c[0];c&&(c[0]=!b.namespace||d?c[0]:[b.namespace,c[0]].join("."),a[a.GoogleAnalyticsObject].apply(a,c),d&&b.initialize())}},i.pressurize=function(a,b){if("function"==typeof a)try{return a()}catch(c){console&&console.warn&&console.warn("AIRLOCK: function passed to _gaq threw error",d[k].toString(),c)}var e=i.conversions[a.splice(0,1)[0].replace(f.actions,"$2")];if(e){if("function"==typeof e)return e.apply(b,a);for(var g={},h=[],k=0,l=a.length<e.input.length?a.length:e.input.length;l>k;k++)g[e.input[k]]=a[k];return k=0,l=e.output.length,e.output.forEach(function(a){var b=j(a,g);b&&h.push(b)}),h}};var j=function(a,b){if("function"==typeof a)return a(b);var c=a.match(/\[\[([a-zA-Z_]+)\]\]/);if(c){if(!b[c[1]])return;return a.replace(c[0],b[c[1]])}return a};i.conversions={_setAccount:function(a){this.setAccount(a)},_setSampleRate:function(a){this.settings.sampleRate=a},_setCookiePath:function(a){this.settings.cookiePath=a},_set:function(a,b){return this.settings[a.replace("ua","cookie")]=b,f.writeableSet.test(a)?["set",a,b]:void 0},_setDomainName:function(a){this._settings.domainName=a},_setAllowLinker:function(a){var b=this;this.settings.allowLinker=a,this.setupQueue.push(function(){e("require","linker"),i.open(b,["linker:autoLink",b._settings.domainName])})},_require:function(a){return"inpage_linkid"===a?["require","linkid","linkid.js"]:void 0},_setCustomVar:function(a,b,c){var d=["set","dimension"+a,c];return this.initialized?d:(this.setupQueue.push(i.open.bind(i,this,d)),void 0)},_trackEvent:{input:["eventCategory","eventAction","eventLabel","eventValue","nonInteraction"],output:["send","event",c]},_trackPageview:{input:["pagePath"],output:["send","pageview","[[pagePath]]"]},_trackTiming:{input:["timingCategory","timingVar","timingValue","timingLabel"],output:["send","timing",c]},_trackSocial:{input:["socialNetwork","socialAction","socialTarget","page"],output:["send","social",c]},_addTrans:{input:["id","affiliation","revenue","tax","shipping"],output:["ecommerce:addTransaction",c]},_addItem:{input:["id","sku","name","category","price","quantity"],output:["ecommerce:addItem",c]},_trackTrans:{input:[],output:["ecommerce:send"]}},i.initialize(),a.Airlock=i}(window,document);