/* | Airlock.js - v0.2.0
   | http://www.searchdiscovery.com/airlock */
!function(a,b){var c={};c.settings=a._airlock||{},c.settings.dimensionMap=c.settings.dimensionMap||{},function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject&&a[a.GoogleAnalyticsObject]||(a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g))}(a,b,"script","//www.google-analytics.com/analytics"+(c.settings.debug?"_debug":"")+".js",c.settings.gaNamespace||"ga"),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)c in this&&a.call(b,this[c],c,this)});var d=function(a){return a},e=a._gaq,f={actions:/^([\w\d_-]+)?\.?(_track(Event|Pageview|Trans|Social|Timing)|_add(Item|Trans)|_set(CustomVar|Account|DomainName|AllowLinker|SampleRate|CookiePath)?|_link|_require)$/,setupActions:/^(.+\.)?_(set(Account|CustomVar|DomainName|AllowLinker|SampleRate|CookiePath)?)$/,ecommerceActions:/^(.+\.)?_(add(Trans|Item)|trackTrans)$/,writeableSet:/^page|title$/},g=function(){this._contents={},this._defaultKey="t0"};g.prototype.get=function(a){return a=a||this._defaultKey,this._contents[a]},g.prototype.set=function(a,b){return a=a||this._defaultKey,this._contents[a]=b,this},g.prototype.has=function(a){return a=a||this._defaultKey,!!this._contents[a]},g.prototype.forEach=function(a,b){for(var c in this._contents)this._contents.hasOwnProperty(c)&&a.call(b,this._contents[c],c,this._contents)};var h=function(a,b){if("object"==typeof a){var c=a;return a=c.get("name"),b=c.get("trackingId"),new h(a,b).initialize()}this.settings={},this._settings={},this.namespace=a,this.account=b,this.setupQueue=[],this.initialized=!1,this.settings.name=this.namespace};h.prototype.setAccount=function(a){return this.account=a,this},h.prototype.initialize=function(){return this.setupQueue.forEach(function(a){a()}),this.initialized=!0,this},c.spaceships=new g,c.readAction=function(a){var b=a.match(f.actions);return{namespace:b[1],action:b[2]}},c.initialize=function(){var b=[],d=a[a.GoogleAnalyticsObject];if(d.q){var g=[].concat(d.q),i=0;d.q.forEach(function(b,d){"string"==typeof b[0]&&"create"===b[0]&&(i=i+d+1,g.splice(i,0,[function(){var d=a[a.GoogleAnalyticsObject],e=b[b.length-1],f="object"==typeof e&&e.name?e.name:"t0",g=d.getByName(f),i=new h(g);c.dock(i)}]))}),d.q=g}d.P&&d.P.forEach(function(a){var b=new h(a);this.dock(b)},this),e.forEach(function(a){if("function"==typeof a)return c.open(null,a),void 0;var d=c.readAction(a[0]);return f.setupActions.test(d.action)?(this.spaceships.has(d.namespace)||this.dock(new h(d.namespace)),this.pressurize(a,this.spaceships.get(d.namespace)),void 0):(b.push(a),void 0)},this),Array.prototype.splice.apply(e,[0,e.length].concat(b)),this.spaceships.forEach(function(a){c.open(a,["create",a.account,a.settings])}),e.push=function(a){if("function"==typeof a)return c.open(null,a);var b=a[0];if(f.actions.test(b)){f.ecommerceActions.test(b)&&!c.ecommerceInitialized&&(c.ecommerceInitialized=!0,c._open(["require","ecommerce","ecommerce.js"]));var d=c.spaceships.get(c.readAction(b).namespace);d&&(a=c.pressurize(a,d),c.open(d,a))}},e.forEach(e.push.bind(e))},c.dock=function(a){this.spaceships.set(a.namespace,a)},c.open=function(a,b){if("function"==typeof b)return c._open([b]);if(a&&a.account){var d="create"===b[0];b&&(b[0]=!a.namespace||d?b[0]:[a.namespace,b[0]].join("."),c._open(b),d&&a.initialize())}},c._open=function(b){return a[a.GoogleAnalyticsObject].apply(a,b)},c.pressurize=function(a,b){var d=c.conversions[a.splice(0,1)[0].replace(f.actions,"$2")];if(d){if("function"==typeof d)return d.apply(b,a);for(var e={},g=[],h=0,j=a.length<d.input.length?a.length:d.input.length;j>h;h++)e[d.input[h]]=a[h];return h=0,j=d.output.length,d.output.forEach(function(a){var b=i(a,e);b&&g.push(b)}),g}};var i=function(a,b){if("function"==typeof a)return a(b);var c=a.match(/\[\[([a-zA-Z_]+)\]\]/);if(c){if(!b[c[1]])return;return a.replace(c[0],b[c[1]])}return a};c.conversions={_setAccount:function(a){this.setAccount(a)},_setSampleRate:function(a){this.settings.sampleRate=a},_setCookiePath:function(a){this.settings.cookiePath=a},_set:function(a,b){return this.settings[a.replace("ua","cookie")]=b,f.writeableSet.test(a)?["set",a,b]:void 0},_setDomainName:function(a){this._settings.domainName=a},_setAllowLinker:function(a){var b=this;this.settings.allowLinker=a,this.setupQueue.push(function(){c._open(["require","linker"]),c.open(b,["linker:autoLink",b._settings.domainName])})},_require:function(a){return"inpage_linkid"===a?["require","linkid","linkid.js"]:void 0},_setCustomVar:function(a,b,d){var e,f=c.settings.dimensionMap;return a=f[a]||f[b]||a,e=["set","dimension"+a,d],this.initialized?e:(this.setupQueue.push(c.open.bind(c,this,e)),void 0)},_trackEvent:{input:["eventCategory","eventAction","eventLabel","eventValue","nonInteraction"],output:["send","event",d]},_trackPageview:{input:["pagePath"],output:["send","pageview","[[pagePath]]"]},_trackTiming:{input:["timingCategory","timingVar","timingValue","timingLabel"],output:["send","timing",d]},_trackSocial:{input:["socialNetwork","socialAction","socialTarget","page"],output:["send","social",d]},_addTrans:{input:["id","affiliation","revenue","tax","shipping"],output:["ecommerce:addTransaction",d]},_addItem:{input:["id","sku","name","category","price","quantity"],output:["ecommerce:addItem",d]},_trackTrans:{input:[],output:["ecommerce:send"]}},c.settings.autoInit!==!1&&c.initialize(),(c.settings.autoInit===!1||c.settings.expose)&&(a.Airlock=c),"function"==typeof define&&define.amd&&define("airlock",[],function(){return c})}(window,document);