/* | Airlock.js - v1.0.3
   | http://www.searchdiscovery.com/airlock */
!function(a,b){function c(a){return a}function d(){this._contents={},this._defaultKey="t0"}var e={};e.settings=a._airlock||{},e.settings.dimensionMap=e.settings.dimensionMap||{},function(a,b,c,d,f,g,h){a.GoogleAnalyticsObject&&a[a.GoogleAnalyticsObject]||(a.GoogleAnalyticsObject=f,a[f]=a[f]||function(){(a[f].q=a[f].q||[]).push(arguments)},e.settings.loadUA!==!1&&(a[f].l=1*new Date,g=b.createElement(c),h=b.getElementsByTagName(c)[0],g.async=1,g.src=d,h.parentNode.insertBefore(g,h)))}(a,b,"script","//www.google-analytics.com/analytics"+(e.settings.debug?"_debug":"")+".js",e.settings.gaNamespace||"ga"),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)c in this&&a.call(b,this[c],c,this)});var f=a._gaq,g={actions:/^([\w\d_-]+)?\.?(_track(Event|Pageview|Trans|Social|Timing)|_add(Item|Trans)|_set(CustomVar|Account|DomainName|AllowLinker|SampleRate|CookiePath|SiteSpeedSampleRate)?|_link|_require)$/,setupActions:/^(.+\.)?_(set(Account|CustomVar|DomainName|AllowLinker|SampleRate|CookiePath|SiteSpeedSampleRate)?)$/,ecommerceActions:/^(.+\.)?_(add(Trans|Item)|trackTrans)$/,writeableSet:/^page|title$/};d.prototype.get=function(a){return a=a||this._defaultKey,this._contents[a]},d.prototype.set=function(a,b){return a=a||this._defaultKey,this._contents[a]=b,this},d.prototype.has=function(a){return a=a||this._defaultKey,!!this._contents[a]},d.prototype.forEach=function(a,b){for(var c in this._contents)this._contents.hasOwnProperty(c)&&a.call(b,this._contents[c],c,this._contents)};var h=function(a,b){if("object"==typeof a){var c=a;return a=c.get("name"),b=c.get("trackingId"),new h(a,b).initialize()}this.settings={},this._settings={},this.namespace=a,this.account=b,this.setupQueue=[],this.initialized=!1,this.settings.name=this.namespace};h.prototype.setAccount=function(a){return this.account=a,this},h.prototype.initialize=function(){return this.setupQueue.forEach(function(a){a()}),this.initialized=!0,this},e.spaceships=new d,e.readAction=function(a){var b=a.match(g.actions);return b?{namespace:b[1],action:b[2]}:null},e.initialize=function(){var b=[],c=a[a.GoogleAnalyticsObject];if(c.q){var d=[].concat(c.q),i=0;c.q.forEach(function(b,c){"string"==typeof b[0]&&"create"===b[0]&&(i=i+c+1,d.splice(i,0,[function(){var c=a[a.GoogleAnalyticsObject],d=b[b.length-1],f="object"==typeof d&&d.name?d.name:"t0",g=c.getByName(f),i=new h(g);e.dock(i)}]))}),c.q=d}c.P&&c.P.forEach(function(a){var b=new h(a);this.dock(b)},this),f.forEach(function(a){if("function"==typeof a)return e.open(null,a),void 0;var c=e.readAction(a[0]);if(c)return g.setupActions.test(c.action)?(this.spaceships.has(c.namespace)||this.dock(new h(c.namespace)),this.pressurize(a,this.spaceships.get(c.namespace)),void 0):(b.push(a),void 0)},this),Array.prototype.splice.apply(f,[0,f.length].concat(b)),this.spaceships.forEach(function(a){e.open(a,["create",a.account,a.settings])}),f.push=function(a){if("function"==typeof a)return e.open(null,a);var b=e.readAction(a[0]);if(b){g.ecommerceActions.test(b.action)&&!e.ecommerceInitialized&&(e.ecommerceInitialized=!0,e._open(["require","ecommerce","ecommerce.js"]));var c=e.spaceships.get(b.namespace);c&&(a=e.pressurize(a,c),e.open(c,a))}},f.forEach(function(a){f.push(a)})},e.dock=function(a){this.spaceships.set(a.namespace,a)},e.open=function(a,b){if("function"==typeof b)return e._open([b]);if(a&&a.account){var c="create"===b[0];b&&(b[0]=!a.namespace||c?b[0]:[a.namespace,b[0]].join("."),e._open(b),c&&a.initialize())}},e._open=function(b){return a[a.GoogleAnalyticsObject].apply(a,b)},e.pressurize=function(a,b){var c=e.conversions[a.splice(0,1)[0].replace(g.actions,"$2")];if(c){if("function"==typeof c)return c.apply(b,a);for(var d={},f=[],h=0,j=a.length<c.input.length?a.length:c.input.length;j>h;h++)d[c.input[h]]=a[h];return h=0,j=c.output.length,c.output.forEach(function(a){var b=i(a,d);b&&f.push(b)}),f}};var i=function(a,b){if("function"==typeof a)return a(b);var c=a.match(/\[\[([a-zA-Z_]+)\]\]/);if(c){if(!b[c[1]])return;return a.replace(c[0],b[c[1]])}return a};if(e.conversions={_setAccount:function(a){this.setAccount(a)},_setSampleRate:function(a){this.settings.sampleRate=a},_setSiteSpeedSampleRate:function(a){this.settings.siteSpeedSampleRate=a},_setCookiePath:function(a){this.settings.cookiePath=a},_set:function(a,b){return this.settings[a.replace("ua","cookie")]=b,g.writeableSet.test(a)?["set",a,b]:void 0},_setDomainName:function(a){this._settings.domainName=a},_setAllowLinker:function(a){var b=this;this.settings.allowLinker=a,this.setupQueue.push(function(){e._open(["require","linker"]),e.open(b,["linker:autoLink",b._settings.domainName])})},_require:function(a){return"inpage_linkid"===a?["require","linkid","linkid.js"]:void 0},_setCustomVar:function(a,b,c){var d,f=e.settings.dimensionMap,g=this;return a=f[a]||f[b]||a,d=["set","dimension"+a,c],this.initialized?d:(this.setupQueue.push(function(){e.open(g,d)}),void 0)},_trackEvent:{input:["eventCategory","eventAction","eventLabel","eventValue","nonInteraction"],output:["send","event",c]},_trackPageview:{input:["pagePath"],output:["send","pageview","[[pagePath]]"]},_trackTiming:{input:["timingCategory","timingVar","timingValue","timingLabel"],output:["send","timing",c]},_trackSocial:{input:["socialNetwork","socialAction","socialTarget","page"],output:["send","social",c]},_addTrans:{input:["id","affiliation","revenue","tax","shipping"],output:["ecommerce:addTransaction",c]},_addItem:{input:["id","sku","name","category","price","quantity"],output:["ecommerce:addItem",c]},_trackTrans:{input:[],output:["ecommerce:send"]}},e.settings.conversions){var j=e.settings.conversions;for(var k in j)j.hasOwnProperty(k)&&(e.conversions[k]=j[k])}e.settings.autoInit!==!1&&e.initialize(),(e.settings.autoInit===!1||e.settings.expose)&&(a.Airlock=e),"function"==typeof define&&define.amd&&define("airlock",[],function(){return e})}(window,document);
